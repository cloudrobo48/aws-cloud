<nav class="sidebar">
    <h2>目次</h2>
    <ul id="sidebar-nav">
        <!-- JavaScriptで自動生成 -->
    </ul>
</nav>
window.onload = () => {
    console.log("window.onload 発火！");
    const headings = document.querySelectorAll("h1, h2, h3");
    console.log("見出し取得:", headings);

    const nav = document.getElementById("sidebar-nav");
    console.log("sidebar-nav:", nav);

    if (!nav) {
        console.error("sidebar-nav が見つかりません！");
        return;
    }

    headings.forEach((heading) => {
        if (!heading.id) {
            heading.id = "section-" + heading.textContent.replace(/\s+/g, "-").toLowerCase();
        }

        const link = document.createElement("a");
        link.href = "#" + heading.id;
        link.textContent = heading.textContent;

        const listItem = document.createElement("li");
        listItem.appendChild(link);
        nav.appendChild(listItem);
    });

    console.log("メニュー生成完了");
};

